<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>I'm Sorry â€” Will You Forgive Me?</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600;800&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0f1022;
      --card:#1a1424;
      --accent:#ff6b81;
      --accent-2:#ffd1dc;
      --glass: rgba(255,255,255,0.04);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Poppins,system-ui,Segoe UI,Roboto,Arial; background: radial-gradient(ellipse at 10% 10%, rgba(255,107,129,0.06), transparent 10%), linear-gradient(180deg,#0b0b14 0%, #15202b 100%); color:#fff;}

    .stage{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px;
      position:relative;
      overflow:hidden;
    }

    .heart-decor{position:absolute;inset:0;pointer-events:none}
    .heart{position:absolute;width:14px;height:14px;transform:rotate(-45deg);opacity:0.95}
    .heart:before,.heart:after{content:'';position:absolute;width:14px;height:14px;background:var(--accent);border-radius:50%}
    .heart:before{top:-7px;left:0}
    .heart:after{left:7px;top:0}

    @keyframes floaty{
      0%{transform:translateY(0) scale(1); opacity:1}
      100%{transform:translateY(-300px) scale(0.6); opacity:0}
    }

    .card{
      width:min(720px,95%);
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius:18px;
      padding:36px;
      box-shadow:0 10px 30px rgba(0,0,0,0.6), 0 0 60px rgba(255,107,129,0.06) inset;
      /* Removed grid-template-columns */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap:24px;
      position:relative;
      z-index:2;
      backdrop-filter: blur(6px);
    }

    .left{
      padding:8px 12px;
      text-align: center;
    }
    h1{font-family:'Great Vibes', cursive;font-size:48px;margin:0 0 6px 0;color:var(--accent-2);text-shadow:0 4px 18px rgba(255,107,129,0.14)}
    p.lead{margin:0 0 20px 0;font-size:18px;opacity:0.92}

    .buttons{display:flex;gap:14px; justify-content: center; flex-direction: column; align-items: center; }
    .btn{
      padding:12px 20px;border-radius:12px;border:0;cursor:pointer;font-weight:700;letter-spacing:0.3px;box-shadow:0 6px 18px rgba(0,0,0,0.4);transition:transform 150ms ease, box-shadow 150ms ease;}
    .btn:active{transform:translateY(2px)}

    .yes{background:linear-gradient(90deg,var(--accent),#ff9ab4);color:#fff}
    .no{background:linear-gradient(90deg,#222,#2b2130);color:#ffd1dc;position:relative}

    /* .right is removed entirely */

    .final-message {
      font-size: 1.2rem;
      font-family: 'Great Vibes', cursive;
      color: var(--accent-2);
      text-align: center;
      margin-top: 20px;
      opacity: 0;
      transition: opacity 1s ease-in;
    }

    .hint{font-size:12px;color:rgba(255,255,255,0.6)}

    #fwCanvas{position:absolute;inset:0;z-index:1;pointer-events:none}

    .burst-heart{position:absolute;width:18px;height:18px;transform:rotate(-45deg)}
    .burst-heart:before,.burst-heart:after{content:'';position:absolute;width:18px;height:18px;background:var(--accent);border-radius:50%}
    .burst-heart:before{top:-9px;left:0}
    .burst-heart:after{left:9px;top:0}

    @media (max-width:820px){
      .card{
        flex-direction: column;
      }
      .left {
        text-align: center;
      }
    }

    .yes{animation: pulse 2.6s infinite}
    @keyframes pulse{0%{box-shadow:0 6px 20px rgba(255,107,129,0.12)}50%{box-shadow:0 16px 40px rgba(255,107,129,0.18)}100%{box-shadow:0 6px 20px rgba(255,107,129,0.12)}}

    /* CSS for the evasive "No" button effects */
    .no:hover {
      animation: flinch 0.3s ease-in-out;
      transform: scale(0.95) translateZ(0);
    }
    @keyframes flinch {
      0% { transform: scale(1); }
      50% { transform: scale(0.9); }
      100% { transform: scale(1); }
    }

    footer{position:absolute;bottom:18px;left:50%;transform:translateX(-50%);font-size:12px;color:rgba(255,255,255,0.5)}
  </style>
</head>
<body>
  <div class="stage">

    <canvas id="fwCanvas"></canvas>
    <div class="heart-decor" id="heartDecor"></div>

    <div class="card" role="main" aria-label="Sorry card">
      <div class="left">
        <h1>I'm Sorry</h1>
        <p class="lead">I made a mistake and I truly regret it. You mean a lot to me â€” will you forgive me?</p>

        <div class="buttons">
          <button class="btn yes" id="yesBtn">Yes, I forgive you ðŸ’–</button>
          <button class="btn no" id="noBtn">No ðŸ’”</button>
        </div>

        <p class="hint">(If you hit "Yes" there's a little surprise)</p>
      </div>

    </div>

    <footer>Made with â™¥</footer>
    <audio id="successAudio" src="success.mp3" preload="auto"></audio>
  </div>

  <script>
    (function spawnDecorHearts(){
      const container = document.getElementById('heartDecor');
      const colors = ['#ff6b81','#ff8aa0','#ffd1dc','#ffb3c6'];
      function make(){
        const el = document.createElement('div');
        el.className = 'heart';
        const size = 8 + Math.random()*22;
        el.style.width = size+'px'; el.style.height = size+'px';
        el.style.left = Math.random()*100+'%';
        el.style.top = 60 + Math.random()*30 + '%';
        el.style.background = 'transparent';
        el.style.transform = 'rotate(-45deg)';
        el.style.setProperty('--c', colors[Math.floor(Math.random()*colors.length)]);
        el.style.filter = 'drop-shadow(0 2px 8px rgba(255,107,129,0.08))';
        el.style.opacity = 0.9;
        el.style.setProperty('animation', 'floaty '+(5+Math.random()*6)+'s linear');
        el.style.setProperty('background', 'transparent');
        el.style.setProperty('z-index','0');
        el.innerHTML = '<div style="position:absolute;left:0;top:0;width:100%;height:100%;transform:rotate(0)"></div>';
        el.style.background = 'linear-gradient(135deg, '+colors[Math.floor(Math.random()*colors.length)]+', #fff)';
        container.appendChild(el);
        setTimeout(()=>el.remove(), 7000);
      }
      for(let i=0;i<8;i++) setTimeout(make, i*300);
      setInterval(make, 900);
    })();

    (function evasiveNo(){
      const noBtn = document.getElementById('noBtn');
      const card = document.querySelector('.card');

      function placeRandom(){
        const cardRect = card.getBoundingClientRect();
        const btnRect = noBtn.getBoundingClientRect();
        
        // Calculate a new position within the bounds of the card
        const newX = cardRect.left + (Math.random() * (cardRect.width - btnRect.width));
        const newY = cardRect.top + (Math.random() * (cardRect.height - btnRect.height));

        noBtn.style.position = 'absolute';
        noBtn.style.left = newX + 'px';
        noBtn.style.top = newY + 'px';
      }

      window.addEventListener('resize', () => {
        if (noBtn.style.position === 'absolute') {
          placeRandom();
        }
      });

      // Change the event from 'mousemove' on the stage to 'mouseover' on the button itself
      noBtn.addEventListener('mouseover', () => {
        placeRandom();
      });

      noBtn.addEventListener('click', (e) => {
        e.preventDefault();
        placeRandom();
      });
    })();

    (function yesHandler(){
      const yesBtn = document.getElementById('yesBtn');
      const successAudio = document.getElementById('successAudio');

      yesBtn.addEventListener('click', () => {
        // Play the sound and then redirect to the new page
        successAudio.play().catch(() => {});
        
        // Redirect to the celebration page
        setTimeout(() => {
          window.location.href = 'celebration.html';
        }, 300); // Small delay to allow the sound to start playing
      });
    })();

    document.addEventListener('keydown',(e)=>{
      if(e.key==='y' || e.key==='Y') document.getElementById('yesBtn').click();
      if(e.key==='n' || e.key==='N') document.getElementById('noBtn').click();
    });
  </script>
</body>
</html>